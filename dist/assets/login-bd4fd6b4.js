import{b as c,c as d,a as r,m as u,d as p,w as h,e as y}from"./config-58d19dce.js";feather.replace();const f=new URLSearchParams(window.location.search),a=document.querySelector(".sign-in");a.onclick=l=>{l.preventDefault(),a.innerHTML='<span class="loader" style="border-top: 3px solid #fff;height: 24px; width: 24px;"></span>';const s=document.querySelector(".input-user"),o=document.querySelector(".input-pwd");o.style.border="1px solid #636363c0;",s.style.border="1px solid #636363c0;",document.querySelector(".invalid-pwd").style.display="none",document.querySelector(".invalid-email").style.display="none",c(r,y).then(()=>{d(r,s.value||"",o.value||"").then(async e=>{e.user.uid==="7JiwkV5dfQO602p5RuGLlOu7Av82"&&(location.href="/admin/");const i=u(p,"user-data",s.value),n=await(await fetch("https://frail-puce-wear.cyclic.app/api/users")).json();console.log(n),n.some(t=>t.id===s.value)?f.get("date")===null?location.href="/venues/":location.href="/book/"+window.location.search:await h(i,{hasResetPwd:!0,hasReserved:!1,reservations:[]}).then(t=>{location.href="/reset/"}).catch(t=>document.querySelector(".form-container").innerHTML='<h3 class="ff-inter">Error logging in. Try again.</h3>')}).catch(e=>{console.log(e),a.innerHTML="Sign In",e.code==="auth/wrong-password"?(o.style.border="1px solid red",document.querySelector(".invalid-pwd").style.display="block"):e.code==="auth/too-many-requests"?(document.querySelector(".invalid-pwd").innerHTML='Too many failed attempts. <br> <a href="/reset/">Reset password</a>',document.querySelector(".invalid-pwd").style.display="block"):e.code==="auth/user-not-found"&&(s.style.border="1px solid red",document.querySelector(".invalid-email").style.display="block")})}).catch(e=>console.log(e))};
