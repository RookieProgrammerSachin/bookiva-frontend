import{o as W,s as R,a as v}from"./config-58d19dce.js";const A=document.querySelector(".user-menu");document.querySelector(".user-nav").addEventListener("click",n=>{A.classList.toggle("user-menu-hidden")});W(v,async n=>{n&&n.uid==="7JiwkV5dfQO602p5RuGLlOu7Av82"?(A.children[0].innerHTML=`
            <h3 class="ff-inter">Welcome, ${n.displayName||n.email}</h3>
            <a class="ff-inter fs-2s user-menu-link log-out" href="#">Log out</a>
        `,document.querySelector(".log-out").onclick=e=>{e.preventDefault(),R(v).then(()=>{location.href="/"}).catch(r=>{console.log("Error occured during Sign out"+r)})},N()):location.href="/"});var w=[],B=[],O=[];const q=document.getElementById("admin-pending-records").children[1],H=document.getElementById("admin-allowed-records").children[1],I=document.getElementById("admin-denied-records").children[1],L=document.querySelector(".msg-box"),S=(n,e)=>{L.innerHTML=`<div style="display:flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">${e?'<i data-feather="check-circle"></i><p class="ff-inter fs-s fw-500">Success:</p>':'<i data-feather="x-circle"></i><p class="ff-inter fs-s fw-500">Issues found:</p>'} </div>`,L.innerHTML+=`${n}`,feather.replace(),L.classList.remove("msg-box-hidden"),j()},j=()=>{setTimeout(()=>{L.classList.add("msg-box-hidden")},5e3)},J=async()=>{try{return await(await fetch("https://frail-puce-wear.cyclic.app/api/admin-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v.currentUser.uid})})).json()}catch(n){console.log(n)}},P=(n,e,r,l,C,h,f,y,E,g)=>{let t=document.createElement("tr");t.classList.add("ff-inter","fs-s"),t.setAttribute("data-reservationid",r);let s=document.createElement("td");s.textContent=n,t.appendChild(s);let c=document.createElement("td");c.textContent=e,t.appendChild(c);let o=document.createElement("td");o.textContent=l,t.appendChild(o);let i=document.createElement("td");i.textContent=C,t.appendChild(i);let m=document.createElement("td");m.textContent=h,t.appendChild(m);let p=document.createElement("td");p.textContent=f,t.appendChild(p);let d=document.createElement("td");d.textContent=y,d.style.maxWidth="8rem",t.appendChild(d);let u=document.createElement("td");u.textContent=E,t.appendChild(u);let a=document.createElement("td");a.textContent=g,a.style.maxWidth="8rem",t.appendChild(a);let x=document.createElement("td");x.classList.add("admin-btn-container");let T=document.createElement("button");T.classList.add("ff-inter","fs-2s","accept-btn"),T.innerHTML="Accept",T.onclick=k=>{G(k.target)};let b=document.createElement("button");return b.classList.add("ff-inter","fs-2s","deny-btn"),b.innerHTML="Deny",b.onclick=k=>{F(k.target)},x.appendChild(T),x.appendChild(b),t.appendChild(x),t},U=(n,e,r,l,C,h,f,y,E,g)=>{let t=document.createElement("tr");t.classList.add("ff-inter","fs-s"),t.setAttribute("data-reservationid",r);let s=document.createElement("td");s.textContent=n,t.appendChild(s);let c=document.createElement("td");c.textContent=e,t.appendChild(c);let o=document.createElement("td");o.textContent=l,t.appendChild(o);let i=document.createElement("td");i.textContent=C,t.appendChild(i);let m=document.createElement("td");m.textContent=h,t.appendChild(m);let p=document.createElement("td");p.textContent=f,t.appendChild(p);let d=document.createElement("td");d.textContent=y,d.style.maxWidth="8rem",t.appendChild(d);let u=document.createElement("td");u.textContent=E,t.appendChild(u);let a=document.createElement("td");return a.textContent=g,a.style.maxWidth="8rem",t.appendChild(a),t},$=(n,e,r,l,C,h,f,y,E,g)=>{let t=document.createElement("tr");t.classList.add("ff-inter","fs-s"),t.setAttribute("data-reservationid",r);let s=document.createElement("td");s.textContent=n,t.appendChild(s);let c=document.createElement("td");c.textContent=e,t.appendChild(c);let o=document.createElement("td");o.textContent=l,t.appendChild(o);let i=document.createElement("td");i.textContent=C,t.appendChild(i);let m=document.createElement("td");m.textContent=h,t.appendChild(m);let p=document.createElement("td");p.textContent=f,t.appendChild(p);let d=document.createElement("td");d.textContent=y,d.style.maxWidth="8rem",t.appendChild(d);let u=document.createElement("td");u.textContent=E,t.appendChild(u);let a=document.createElement("td");return a.textContent=g,a.style.maxWidth="8rem",t.appendChild(a),t},F=async n=>{const e=n.parentNode.parentNode.dataset.reservationid;console.log(e);try{await fetch("https://frail-puce-wear.cyclic.app/api/admin-deny",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reserveId:e,id:v.currentUser.uid})}),S('<p class="ff-inter fs-2s">Succesfully denied booking</p>',!0),N()}catch(r){console.log(r),S('<p class="ff-inter fs-2s">Error in denying booking. Try again or contact help.</p>',!1)}},G=async n=>{const e=n.parentNode.parentNode.dataset.reservationid;console.log(e);try{await fetch("https://frail-puce-wear.cyclic.app/api/admin-accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reserveId:e,id:v.currentUser.uid})}),S('<p class="ff-inter fs-2s">Succesfully accepted booking</p>',!0),N()}catch(r){console.log(r),S('<p class="ff-inter fs-2s">Error in accepting booking. Try again or contact help.</p>',!1)}},N=async()=>{q.innerHTML="",H.innerHTML="",I.innerHTML="";const n=await J();B=n[0],O=n[1],w=n[2],console.log(w.reservation),w.reservation.forEach((e,r)=>{let l=P(r+1,e.reservedHall,e.reserveId,e.reserverName||e.reservedBy,e.reservedOn,e.startTime,e.endTime,e.guest,e.seats,e.purpose);q.appendChild(l),feather.replace()}),B.reservation.forEach((e,r)=>{let l=U(r+1,e.reservedHall,e.reserveId,e.reserverName||e.reservedBy,e.reservedOn,e.startTime,e.endTime,e.guest,e.seats,e.purpose);H.appendChild(l)}),O.reservation.forEach((e,r)=>{let l=$(r+1,e.reservedHall,e.reserveId,e.reserverName||e.reservedBy,e.reservedOn,e.startTime,e.endTime,e.guest,e.seats,e.purpose);I.appendChild(l)})},M=document.querySelectorAll(".admin-menu-link"),Q=document.querySelectorAll(".admin-data-record");M.forEach(n=>{n.addEventListener("click",e=>{e.preventDefault();for(let r of Q)r.classList.add("admin-data-hidden"),r.dataset.state===e.target.dataset.table&&r.classList.remove("admin-data-hidden");M.forEach(r=>{r.classList.remove("admin-menu-link-active"),e.target.classList.add("admin-menu-link-active")})})});feather.replace();
