import{o as J,s as P,a as b}from"./config-58d19dce.js";const W=document.querySelector(".user-menu");document.querySelector(".user-nav").addEventListener("click",l=>{W.classList.toggle("user-menu-hidden")});J(b,async l=>{l&&l.uid==="7JiwkV5dfQO602p5RuGLlOu7Av82"?(W.children[0].innerHTML=`
            <h3 class="ff-inter">Welcome, ${l.displayName||l.email}</h3>
            <a class="ff-inter fs-2s user-menu-link log-out" href="#">Log out</a>
        `,document.querySelector(".log-out").onclick=e=>{e.preventDefault(),P(b).then(()=>{location.href="/"}).catch(n=>{console.log("Error occured during Sign out"+n)})},A()):location.href="/"});var N=[],k=[],S=[];const M=document.getElementById("admin-pending-records").children[1],O=document.getElementById("admin-allowed-records").children[1],q=document.getElementById("admin-denied-records").children[1],H=document.querySelector(".msg-box"),w=(l,e)=>{H.innerHTML=`<div style="display:flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">${e?'<i data-feather="check-circle"></i><p class="ff-inter fs-s fw-500">Success:</p>':'<i data-feather="x-circle"></i><p class="ff-inter fs-s fw-500">Issues found:</p>'} </div>`,H.innerHTML+=`${l}`,feather.replace(),H.classList.remove("msg-box-hidden"),U()},U=()=>{setTimeout(()=>{H.classList.add("msg-box-hidden")},5e3)},$=async()=>{try{return await(await fetch("http://localhost:3000/api/admin-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:b.currentUser.uid})})).json()}catch(l){console.log(l)}},F=(l,e,n,r,d,g,x,L,T,m)=>{let t=document.createElement("tr");t.classList.add("ff-inter","fs-s"),t.setAttribute("data-reservationid",n);let p=document.createElement("td");p.textContent=l,t.appendChild(p);let u=document.createElement("td");u.textContent=e,t.appendChild(u);let h=document.createElement("td");h.textContent=r,t.appendChild(h);let C=document.createElement("td");C.textContent=d,t.appendChild(C);let f=document.createElement("td");f.textContent=g,t.appendChild(f);let y=document.createElement("td");y.textContent=x,t.appendChild(y);let o=document.createElement("td");o.textContent=L,o.style.maxWidth="8rem",t.appendChild(o);let v=document.createElement("td");v.textContent=T,t.appendChild(v);let c=document.createElement("td");c.textContent=m.split(`
`)[0],c.style.maxWidth="8rem",t.appendChild(c);let i=document.createElement("td");i.textContent=m.split(`
`)[1],i.style.maxWidth="8rem",t.appendChild(i);let s=document.createElement("td");s.classList.add("admin-btn-container");let a=document.createElement("button");a.classList.add("ff-inter","fs-2s","accept-btn"),a.innerHTML="Accept",a.onclick=B=>{j(B.target,0)};let E=document.createElement("button");return E.classList.add("ff-inter","fs-2s","deny-btn"),E.innerHTML="Deny",E.onclick=B=>{R(B.target,0)},s.appendChild(a),s.appendChild(E),t.appendChild(s),t},G=(l,e,n,r,d,g,x,L,T,m)=>{let t=document.createElement("tr");t.classList.add("ff-inter","fs-s"),t.setAttribute("data-reservationid",n);let p=document.createElement("td");p.textContent=l,t.appendChild(p);let u=document.createElement("td");u.textContent=e,t.appendChild(u);let h=document.createElement("td");h.textContent=r,t.appendChild(h);let C=document.createElement("td");C.textContent=d,t.appendChild(C);let f=document.createElement("td");f.textContent=g,t.appendChild(f);let y=document.createElement("td");y.textContent=x,t.appendChild(y);let o=document.createElement("td");o.textContent=L,o.style.maxWidth="8rem",t.appendChild(o);let v=document.createElement("td");v.textContent=T,t.appendChild(v);let c=document.createElement("td");c.textContent=m.split(`
`)[0],c.style.maxWidth="8rem",t.appendChild(c);let i=document.createElement("td");i.textContent=m.split(`
`)[1],i.style.maxWidth="8rem",t.appendChild(i);let s=document.createElement("td");s.classList.add("admin-btn-container");let a=document.createElement("button");return a.classList.add("ff-inter","fs-2s","deny-btn"),a.innerHTML="Deny",a.onclick=E=>{R(E.target,1)},s.appendChild(a),t.appendChild(s),t},Q=(l,e,n,r,d,g,x,L,T,m)=>{let t=document.createElement("tr");t.classList.add("ff-inter","fs-s"),t.setAttribute("data-reservationid",n);let p=document.createElement("td");p.textContent=l,t.appendChild(p);let u=document.createElement("td");u.textContent=e,t.appendChild(u);let h=document.createElement("td");h.textContent=r,t.appendChild(h);let C=document.createElement("td");C.textContent=d,t.appendChild(C);let f=document.createElement("td");f.textContent=g,t.appendChild(f);let y=document.createElement("td");y.textContent=x,t.appendChild(y);let o=document.createElement("td");o.textContent=L,o.style.maxWidth="8rem",t.appendChild(o);let v=document.createElement("td");v.textContent=T,t.appendChild(v);let c=document.createElement("td");c.textContent=m.split(`
`)[0],c.style.maxWidth="8rem",t.appendChild(c);let i=document.createElement("td");i.textContent=m.split(`
`)[1],i.style.maxWidth="8rem",t.appendChild(i);let s=document.createElement("td");s.classList.add("admin-btn-container");let a=document.createElement("button");return a.classList.add("ff-inter","fs-2s","accept-btn"),a.innerHTML="Accept",a.onclick=E=>{j(E.target,1)},s.appendChild(a),t.appendChild(s),t},R=async(l,e)=>{const n=l.parentNode.parentNode.dataset.reservationid;console.log(n),l.classList.add("disabled");try{await fetch("http://localhost:3000/api/admin-deny",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reserveId:n,id:b.currentUser.uid,mode:e})}),w('<p class="ff-inter fs-2s">Succesfully denied booking</p>',!0),A()}catch(r){console.log(r),w('<p class="ff-inter fs-2s">Error in denying booking. Try again or contact help.</p>',!1)}},j=async(l,e)=>{const n=l.parentNode.parentNode.dataset.reservationid;console.log(n),l.classList.add("disabled");try{await fetch("http://localhost:3000/api/admin-accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reserveId:n,id:b.currentUser.uid,mode:e})}),w('<p class="ff-inter fs-2s">Succesfully accepted booking</p>',!0),A()}catch(r){console.log(r),w('<p class="ff-inter fs-2s">Error in accepting booking. Try again or contact help.</p>',!1)}},A=async()=>{M.innerHTML="",O.innerHTML="",q.innerHTML="";const l=await $();k=l[0],S=l[1],N=l[2],console.log(N.reservation),k.reservation.sort((e,n)=>{const r=e.reservedHall.toLowerCase(),d=n.reservedHall.toLowerCase();return r<d?-1:r>d?1:0}),N.reservation.sort((e,n)=>{const r=e.reservedHall.toLowerCase(),d=n.reservedHall.toLowerCase();return r<d?-1:r>d?1:0}),S.reservation.sort((e,n)=>{const r=e.reservedHall.toLowerCase(),d=n.reservedHall.toLowerCase();return r<d?-1:r>d?1:0}),N.reservation.forEach((e,n)=>{let r=F(n+1,e.reservedHall,e.reserveId,e.reserverName||e.reservedBy,e.reservedOn,e.startTime,e.endTime,e.guest,e.seats,e.purpose);M.appendChild(r),feather.replace()}),k.reservation.forEach((e,n)=>{let r=G(n+1,e.reservedHall,e.reserveId,e.reserverName||e.reservedBy,e.reservedOn,e.startTime,e.endTime,e.guest,e.seats,e.purpose);O.appendChild(r)}),S.reservation.forEach((e,n)=>{let r=Q(n+1,e.reservedHall,e.reserveId,e.reserverName||e.reservedBy,e.reservedOn,e.startTime,e.endTime,e.guest,e.seats,e.purpose);q.appendChild(r)})},I=document.querySelectorAll(".admin-menu-link"),V=document.querySelectorAll(".admin-data-record");I.forEach(l=>{l.addEventListener("click",e=>{e.preventDefault();for(let n of V)n.classList.add("admin-data-hidden"),n.dataset.state===e.target.dataset.table&&n.classList.remove("admin-data-hidden");I.forEach(n=>{n.classList.remove("admin-menu-link-active"),e.target.classList.add("admin-menu-link-active")})})});feather.replace();
